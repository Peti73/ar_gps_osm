<button id="start">Start GPS + Giroszkóp</button>
<div id="info"></div>
<script>
const info = document.getElementById('info');
let lat=null,lng=null,alpha=0,beta=0,gamma=0;

document.getElementById('start').addEventListener('click', () => {
    // GPS indítása
    navigator.geolocation.watchPosition(
        pos => { lat = pos.coords.latitude; lng = pos.coords.longitude; updateInfo(); },
        err => console.error(err),
        { enableHighAccuracy: true }
    );

    // Giroszkóp indítása
    if (typeof DeviceOrientationEvent.requestPermission === 'function') {
        DeviceOrientationEvent.requestPermission()
            .then(state=>{
                if(state==='granted'){
                    window.addEventListener('deviceorientation', e=>{
                        alpha=e.alpha||0; beta=e.beta||0; gamma=e.gamma||0;
                        updateInfo();
                    });
                } else alert("Girosszkóp engedély megtagadva");
            }).catch(console.error);
    } else {
        window.addEventListener('deviceorientation', e=>{
            alpha=e.alpha||0; beta=e.beta||0; gamma=e.gamma||0;
            updateInfo();
        });
    }
});

function updateInfo() {
    info.innerHTML = `
        Lat: ${lat??'...'}<br>
        Lng: ${lng??'...'}<br>
        Alpha: ${alpha.toFixed(1)}<br>
        Beta: ${beta.toFixed(1)}<br>
        Gamma: ${gamma.toFixed(1)}
    `;
}
</script>
